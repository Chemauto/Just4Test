# 使用指南

## 运行方式

```bash
conda activate ros2_env
cd /home/robot/work/LekiwiTest/UntrieeGo2/code
python mujoco_deploy.py
```

## 交互界面

程序启动后会打开MuJoCo viewer窗口，并在终端显示交互界面：

```
==============================================================
控制说明:
==============================================================
  命令格式: <vx> <vy> <wz>
  示例:
    0.5 0.0 0.0   - 前进 0.5 m/s
    0.0 0.3 0.0   - 向左平移 0.3 m/s
    0.0 0.0 0.5   - 原地旋转 0.5 rad/s
    0.0 0.0 0.0   - 停止
  输入 'q' 退出
==============================================================

重置到初始状态...
基座高度: 0.400

开始仿真...
==============================================================
当前命令: vx=0.00, vy=0.00, wz=0.00
输入新命令 (vx vy wz) 改变运动，例如: 0.5 0 0
输入 'q' 或按 Ctrl+C 退出
==============================================================

> 0.5 0 0
✓ 命令已更新: vx=0.50, vy=0.00, wz=0.00

步骤:120 | 命令:[0.50, 0.00, 0.00] | 位置:[0.15, 0.02, 0.40] | 速度:[0.48, 0.01]
```

## 命令格式

每次输入三个数字，用空格分隔：

| 命令 | 说明 | 示例 |
|------|------|------|
| 前进 | 向前移动 | `0.5 0 0` |
| 后退 | 向后移动 | `-0.5 0 0` |
| 左移 | 向左平移 | `0 0.3 0` |
| 右移 | 向右平移 | `0 -0.3 0` |
| 左转 | 原地向左转 | `0 0 0.5` |
| 右转 | 原地向右转 | `0 0 -0.5` |
| 停止 | 停止运动 | `s` |
| 退出 | 退出程序 | `q` |

## 执行流程

1. 机器人持续执行当前命令（初始为 0 0 0，站立不动）
2. 随时输入新命令，例如: `0.5 0 0`
3. 按Enter键，机器人立即改变运动
4. 实时显示位置和速度信息（每秒更新）
5. 输入 `q` 或按 Ctrl+C 退出

## 示例运行

```bash
# 启动
$ python mujoco_deploy.py

# 交互示例
> 0.5 0 0
✓ 命令已更新: vx=0.50, vy=0.00, wz=0.00
步骤:120 | 命令:[0.50, 0.00, 0.00] | 位置:[0.15, 0.02, 0.40] | 速度:[0.48, 0.01]
步骤:180 | 命令:[0.50, 0.00, 0.00] | 位置:[0.28, 0.03, 0.40] | 速度:[0.49, 0.02]

> s
✓ 已停止: vx=0.00, vy=0.00, wz=0.00

> 0 0 0.5
✓ 命令已更新: vx=0.00, vy=0.00, wz=0.50
步骤:240 | 命令:[0.00, 0.00, 0.50] | 位置:[0.28, 0.03, 0.40] | 速度:[0.01, 0.02]

> s
✓ 已停止: vx=0.00, vy=0.00, wz=0.00

> q
仿真结束
```

## 关键特性

### 持续执行模式
- 机器人持续执行当前命令，不会停止
- 可以随时输入新命令改变运动
- 不需要重复输入命令

### 实时状态显示
- 每秒更新一次状态信息
- 显示当前执行的命令
- 显示机器人位置和速度
- 显示已执行的步数

## 注意事项

1. **确保终端可交互** - 在支持stdin的环境中运行
2. **输入格式** - 必须是三个数字，用空格分隔
3. **持续运动** - 机器人会一直执行当前命令，直到输入新命令
4. **退出方式** - 输入 `q` 或按 Ctrl+C

## 故障排除

### 无法输入

如果程序启动后无法输入，可能是因为：
- 终端不支持交互输入
- 需要在真实的终端中运行（不是某些IDE的终端）
- 尝试直接在系统终端运行

### Viewer不显示

如果MuJoCo viewer不显示：
- 检查是否设置了 `MUJOCO_GL=egl`
- 尝试删除或修改这个环境变量
- 确保图形驱动正常工作

### 机器人倒塌

如果机器人立即倒塌：
- 检查策略文件路径是否正确
- 确认使用的是 `Rough_Walk_policy4Mujoco.pt`
- 查看终端输出的调试信息

### 机器人不动

如果机器人保持站立但不移动：
- 初始命令是 `0 0 0`（站立不动）
- 输入运动命令如 `0.5 0 0` 让机器人前进
- 确认命令格式正确（三个数字，空格分隔）
